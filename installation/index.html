
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The open-source solution for guiding patrons to books in your open stacks">
      
      
      
      
        <link rel="canonical" href="https://github.com/LeidenUniversityLibrary/Alma-Primo-Locate-Tool-Open-Source/installation/">
      
      <link rel="shortcut icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.3">
    
    
      
        <title>Installation - Alma-Primo Locate Tool</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1655a90d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700%7CUbuntu&display=fallback">
        <style>:root{--md-text-font-family:"Open Sans";--md-code-font-family:"Ubuntu"}</style>
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="leidenuniv" data-md-color-primary="white" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#local-and-server-installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://github.com/LeidenUniversityLibrary/Alma-Primo-Locate-Tool-Open-Source" title="Alma-Primo Locate Tool" class="md-header__button md-logo" aria-label="Alma-Primo Locate Tool">
      
  <img src="../assets/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Alma-Primo Locate Tool
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/LeidenUniversityLibrary/Alma-Primo-Locate-Tool-Open-Source" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Alma-Primo Locate Tool
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../introduction/" class="md-tabs__link md-tabs__link--active">
        Getting started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        More info
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../changelog/" class="md-tabs__link">
        Changelog
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://github.com/LeidenUniversityLibrary/Alma-Primo-Locate-Tool-Open-Source" title="Alma-Primo Locate Tool" class="md-nav__button md-logo" aria-label="Alma-Primo Locate Tool">
      
  <img src="../assets/favicon.png" alt="logo">

    </a>
    Alma-Primo Locate Tool
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/LeidenUniversityLibrary/Alma-Primo-Locate-Tool-Open-Source" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Alma-Primo Locate Tool
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Getting started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Installation
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#local-installation" class="md-nav__link">
    Local installation
  </a>
  
    <nav class="md-nav" aria-label="Local installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-database" class="md-nav__link">
    Local Database
  </a>
  
    <nav class="md-nav" aria-label="Local Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-sqlite" class="md-nav__link">
    Local SQLite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-mysql" class="md-nav__link">
    Local MySQL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-installation" class="md-nav__link">
    Server installation
  </a>
  
    <nav class="md-nav" aria-label="Server installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ftp-only-workaround" class="md-nav__link">
    FTP-only workaround
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-ssh" class="md-nav__link">
    Using SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-database" class="md-nav__link">
    Server Database
  </a>
  
    <nav class="md-nav" aria-label="Server Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-sqlite" class="md-nav__link">
    Server SQLite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-mysql" class="md-nav__link">
    Server MySQL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-admin-accounts" class="md-nav__link">
    The admin account(s)
  </a>
  
    <nav class="md-nav" aria-label="The admin account(s)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#admin-account-for-local-testing" class="md-nav__link">
    Admin account for local testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-accounts-for-staging-and-production-environments" class="md-nav__link">
    Admin account(s) for staging and production environments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#activating-the-locate-button-in-alma" class="md-nav__link">
    Activating the "Locate" button in Alma
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-the-locate-label" class="md-nav__link">
    Modifying the "Locate" label
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../customization/" class="md-nav__link">
        Customization
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../technical-notes/" class="md-nav__link">
        Technical notes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../data-privacy/" class="md-nav__link">
        Data privacy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        License
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        More info
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="More info" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          More info
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About us
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Changelog
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Changelog" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Changelog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Alma-Primo Locate Tool
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#local-installation" class="md-nav__link">
    Local installation
  </a>
  
    <nav class="md-nav" aria-label="Local installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-database" class="md-nav__link">
    Local Database
  </a>
  
    <nav class="md-nav" aria-label="Local Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-sqlite" class="md-nav__link">
    Local SQLite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-mysql" class="md-nav__link">
    Local MySQL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-installation" class="md-nav__link">
    Server installation
  </a>
  
    <nav class="md-nav" aria-label="Server installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ftp-only-workaround" class="md-nav__link">
    FTP-only workaround
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-ssh" class="md-nav__link">
    Using SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-database" class="md-nav__link">
    Server Database
  </a>
  
    <nav class="md-nav" aria-label="Server Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-sqlite" class="md-nav__link">
    Server SQLite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-mysql" class="md-nav__link">
    Server MySQL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-admin-accounts" class="md-nav__link">
    The admin account(s)
  </a>
  
    <nav class="md-nav" aria-label="The admin account(s)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#admin-account-for-local-testing" class="md-nav__link">
    Admin account for local testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-accounts-for-staging-and-production-environments" class="md-nav__link">
    Admin account(s) for staging and production environments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#activating-the-locate-button-in-alma" class="md-nav__link">
    Activating the "Locate" button in Alma
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-the-locate-label" class="md-nav__link">
    Modifying the "Locate" label
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="local-and-server-installation">Local and server installation</h1>
<p>Installing APLT is easy. In this guide we will explain how to install the application locally on your machine, and on your server. Note that there are multiple ways of running an applicaiton made using Laravel. The ways described here are meant for users whom are interested simply at giving a look at the application.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></p>
<h2 id="local-installation">Local installation</h2>
<p><strong>In your <code>.env</code> file, make sure <code>APP_ENV=local</code> and <code>APP_DEBUG=true</code> are set. This will help you with local development.</strong></p>
<p>Assuming you have <a href="https://getcomposer.org/">Composer</a> and PHP installed locally on your machine:</p>
<ol>
<li>Clone the repository from GitHub.  </li>
<li><code>composer install</code> to install the required dependencies.  </li>
<li><code>cp .env.example .env</code> to generate a .env file.  </li>
<li><code>php artisan key:generate</code> to generate an encryption key.</li>
<li>Add your Alma API key in the <code>.env</code> file .</li>
</ol>
<p>Your application is now ready to run, but has no database attached to it yet.  </p>
<p>Please take the time to familiarize with the .env file. The variables in this file are crucicial for your application to work properly.</p>
<h3 id="local-database">Local Database</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Laravel can use several different database connections: if you would like something else than MySQL or SQLite, please refer to the official <a href="https://laravel.com/docs/7.x/database">Laravel documentation</a> for more information.</p>
</div>
<h4 id="local-sqlite">Local SQLite</h4>
<p>If you are only testing the application, we advise using SQLite:</p>
<ol>
<li>In your <code>.env</code> file, replace <code>DB_CONNECTION=mysql</code> with <code>DB_CONNECTION=sqlite</code></li>
<li>Comment out, or delete, the additional <code>DB_</code> variables. These are not needed with SQLite.</li>
<li>In the <code>/database</code> folder, create a text file called <code>database.sqlite</code>.  </li>
<li><code>php artisan migrate:fresh --seed</code> to populate the database, and create dummy data and an admin user.  </li>
<li><code>php artisan serve</code> to lunch your application.  </li>
</ol>
<h4 id="local-mysql">Local MySQL</h4>
<p>For production environments, or for extended development, we recommend using MySQL as your database.</p>
<ol>
<li>In your .env file, make sure <code>DB_CONNECTION=mysql</code> is set.  </li>
<li>Generate a MySQL database, and make sure that the <code>.env</code> settings are properly set and that you can make a connection. The way you can generate a MySQL database locally can vary. We advise using <a href="https://www.apachefriends.org/index.html">XAMPP</a>.</li>
<li>With a MySQL database generated and connected to the app, use <code>php artisan migrate:fresh --seed</code> to populate the database, and create dummy data and an admin user.  </li>
<li><code>php artisan serve</code> to lunch your application.  </li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not use <code>php artisan migrate:fresh --seed</code> in a production environment as <strong>it creates an admin user with a very weak password</strong> and replaces all your currently entered data with samples!</p>
</div>
<h2 id="server-installation">Server installation</h2>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p><strong>In your <code>.env</code> file, make sure <code>APP_ENV=staging</code> or <code>APP_ENV=production</code> and <code>APP_DEBUG=false</code> are set.</strong> Do not publish a laravel application on a server without these settings or the application will output sensitive information about your server.</p>
</div>
<h3 id="ftp-only-workaround">FTP-only workaround</h3>
<p>You can install this application on your server in multiple ways. While <strong>we strongly recommend an SSH connection to your server</strong>, you can also install this application using FTP only.</p>
<p>To work only via FTP, install the application locally on your machine following the steps above using a SQLite database. Run all the Artisan commands locally and then upload all the files via FTP.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Use the FTP-only solution only if you have no other possibility. This solution is potentially unsafe and more of a workaround than a solution. <strong>We strongly advise setting up an SSH connection to your server</strong> before launching you application into produciton.</p>
</div>
<h3 id="using-ssh">Using SSH</h3>
<p>There are multiple ways to upload your app (via, GIT, GIT FTP, SFTP, etc.) and all will do perfectly.
Once you have uploaded the application's file to the server, use <code>composer install</code> to install the dependencies. If you do not have Composer installed on your server, upload the <code>composer.phar</code> file - available on the <a href="https://getcomposer.org/">Composer website</a> - to your application folder and use <code>php composer.phar install</code> to install the dependencies. Once the dependencies are installed on the server, you can execute the same Artisan commands listed in this guide.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The main folder in Laravel is named <code>public</code>, some servers use <code>public_html</code> instead. Make sure your DNS points to the "public" folder.
You can also decide to use the <code>public_html</code> folder instead, but you will have to make some changes to your configuration. How to do this is out of scope of this documentation.<sup id="fnref2:1"><a class="footnote-ref" href="#fn:1">1</a></sup></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can further optimize the deployment of your application using more complex Laravel and Composer commands. See the <a href="https://laravel.com/docs/7.x/deployment">Laravel documentation on deployment</a> for more information.</p>
</div>
<h3 id="server-database">Server Database</h3>
<h4 id="server-sqlite">Server SQLite</h4>
<p>If your server has no MySQL, or you cannot use SSH, it is easiest to use SQLite as your database.<br />
The following commands can be run both locally or via SSH.</p>
<ol>
<li>In your <code>.env</code> file replace <code>DB_CONNECTION=mysql</code> with <code>DB_CONNECTION=sqlite</code> and remove any additional <code>DB_</code> definitions.</li>
<li>In the <code>/database</code> folder, create a text file called <code>database.sqlite</code>  </li>
<li><code>php artisan migrate:fresh</code> to populate the database.  </li>
<li>Upload the generated SQLite file to your server, in the <code>/database</code> folder.  </li>
</ol>
<h4 id="server-mysql">Server MySQL</h4>
<p>The following commands can be run via SSH only.</p>
<ol>
<li>In your .env file, make sure <code>DB_CONNECTION=mysql</code> is set, along with the other <code>DB_</code> varaibles.</li>
<li>Generate a MySQL database, and make sure that the .env settings are properly set and that you can make a connection.</li>
<li><code>php artisan migrate:fresh</code> to populate the database. Unlike with the local installation, we are not using <code>--seed</code> in this case.</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Do not use <code>php artisan migrate:fresh</code> on a public/production server, unless you are starting out: <strong>you will overwrite all the data, and you will create the most easy to guess username and password ever!</strong></p>
</div>
<h2 id="the-admin-accounts">The admin account(s)</h2>
<p>APLT requires an admin account to generate and manage the data.</p>
<h3 id="admin-account-for-local-testing">Admin account for local testing</h3>
<p>For your convenience, when you use the command <code>php artisan migrate:fresh --seed</code> APLT will create an admin account for testing the application:</p>
<ul>
<li>Username: <code>admin@example.com</code></li>
<li>Password: <code>example</code></li>
</ul>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Use this command only on local installations. <strong>Do not do this on servers connected to internet.</strong></p>
</div>
<h3 id="admin-accounts-for-staging-and-production-environments">Admin account(s) for staging and production environments</h3>
<p>To generate a admin user, or creating multiple admin users, we use <a href="https://laravel.com/docs/7.x/artisan#tinker">Tinker</a>. Tinker is included in Laravel.  </p>
<p>Make sure you have run the <code>php artisan migrate:fresh</code> to generate the empty tables in your database. Then:<br />
<code>php artisan tinker</code><br />
<code>DB::table('users')-&gt;insert(['name'=&gt;'YourUsername','email'=&gt;'thisis@youremail.com','password'=&gt;Hash::make('TypeYourPasswordHere')])</code><br />
You can add as many users as necessary.</p>
<p>If you do not have a SSH connection, and you are using the FTP-only method, run the commands above locally to add the admin user(s) to your database.</p>
<h2 id="activating-the-locate-button-in-alma">Activating the "Locate" button in Alma</h2>
<p>Once you have your application running, it is time to make some changes in Alma. Alma, by default, can display a button in Primo with the text "Locate". The way to activate this button is a bit hidden, so we are descbing it here too.</p>
<p>1) In Alma, navigate to Alma configuration -&gt; General -&gt; External Systems -&gt; Integration Profiles.
<img alt="The Alma Integration Profiles link" src="/assets/img/alma-admin-integ-prof.png" /></p>
<p>2) Click on "Add Integraiton Profile" and fill in the fields. You can assign any code and any name, but the "Intergration Type" must be "Discovery Interface".</p>
<p><img alt="The Alma Integration Profiles link" src="/assets/img/alma-admin-integ-prof-generate.png" /></p>
<p>3) In step 2, in "URL template", type:
<code>https://yourapplication.com/find/{location_code}</code> - Your application can be hosted in a sub-site, but the <code>/find/{location_code}</code> path must always be present.<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup></p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>The base URL at Leiden University is <code>https://finder.library.universiteitleiden.nl/find/{location_code}</code></p>
</div>
<p>4) Select the Alma Libraries and Alma Locations you would like the "Locate" button to appear.  </p>
<p>5) Click on Save. The "Locate" button will now appear in Primo, next to books or items kept in therelated Alma Locations.</p>
<h2 id="modifying-the-locate-label">Modifying the "Locate" label</h2>
<p>The button that appears in Primo is a standard button designed by ExLibrs. If you would like to replace the word "Locate" with something else, go to the <strong>Discovery Interface Labels</strong> and modify the <code>c.uresolver.locate</code> label.
<img alt="The Alma Integration Profiles link" src="/assets/img/alma-admin-locate.png" /></p>
<p><img alt="The Alma Integration Profiles link" src="/assets/img/primo-locate-button.png" /></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Please see the <a href="https://laravel.com/docs/7.x">official Laravel documentation</a> for a more detailed explenation on how to deploy a Laravel application.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>This can be modified in the code, by modifing the routes in <code>web.php</code> file.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../requirements/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Requirements
            </div>
          </div>
        </a>
      
      
        <a href="../customization/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Customization
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            GNU General Public License v3.0 - Leiden University Libraries
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://www.universiteitleiden.nl" target="_blank" rel="noopener" title="www.universiteitleiden.nl" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/LeidenUniversityLibrary" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.sections", "navigation.tracking"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.ca5457b8.min.js"></script>
      
    
  </body>
</html>